<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8" />
<title>MineSweep</title>
<style type="text/css">
body { background: green; margin:0; }
#SCREEN { display:block; }
</style>
<script type="text/javascript" src="Environment.js"></script>
<script type="text/javascript" src="Util.js"></script>
<script type="text/javascript" src="Movie.js"></script>
<script type="text/javascript" src="Painter.js"></script>
<script type="text/javascript" src="MineResource.js"></script>
<script type="text/javascript" src="MineBlock.js"></script>
<script type="text/javascript" src="MineBattleground.js"></script>
</head>

<body>
    <canvas id="SCREEN"></canvas>

    <script type="text/javascript" src="screen.js"></script>
    <script type="text/javascript" src="Widget.js"></script>
    <script type="text/javascript">

        // game window
        const WIDGET = new Widget;
        const STATUS = new Widget;
    </script>
    <script type="text/javascript" src="MineSweeper.js"></script>
    <script type="text/javascript">
        // btn
        const BTN_START = new Widget;
        BTN_START.resize(30, 30);
        BTN_START.onclick = GameStart;
        STATUS.addWindow(BTN_START);

        SCREEN.addWindow(WIDGET);
        SCREEN.addWindow(STATUS);

        /**
         * 开始游戏
         */
        function GameStart () {
            game.resetMines(99);
            game.ready();
            game.refresh();
        }

        const game = new MineSweeper(30, 16);


        window.onload = function () {
            // 加载图片
            RES.start(GameStart);

            BTN_START.render = (painter) => {
                painter.drawImage(0, 0, RES.BTN_START);
            };
        };
    </script>
</body>
</html>

